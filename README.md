# 0827

JPA의 모든 데이터 변경은 트랜잭션 안에서 실행<br>

도메인 설정시<br>
DB에 테이블 이름과 domain이 다르면 @Table 어노테이션에 명시<br>
Table 컬럼명이 다르면 @Column(name = "test")으로 명시

영속성 컨텍스트 : 엔티티를 영구 저장하는 환경<br>
1차 캐시 : 동일한 트랜잭션 안에서 같은 쿼리를 사용했을때 DB에 쿼리가 안날라감 (성능상 중요하진 않음)
플러시 : 영속성 컨텍스트의 변경내용을 즉시 DB에 반영<br>

# 0828
엔티티 매핑<br>
객체와 테이블 매핑 : @Entity, @Table<br>
필드와 컬럼 매핑 : @Column<br>
기본키 매핑 : @Id<br>
연관관계 매핑 : @ManyToOne, @JoinColumn<br>

@Transient : DB와 상관없는 컬럼

# 0901
기본키 매핑<br>
@Id : 직접 할당<br>

@GeneratedValue : 자동 생성<br>
IDENTITY 전략 : 기본키 생성을 DB에 위임<br>
SEQUENCE 전략 : 주로 오라클에서 사용

# 0905
연관관계 매핑 기초

# 0906
관례상 컬렉션이있으면 초기화를 해둔다. nullpoint 뜨지않게<br>

양방향 매핑 규칙<br>
1. 객체의 두 관계중 하나를 연관관계의 주인으로 지정
2. 연관관계의 주인만이 외래키를 관리(등록,수정)
3. 주인이 아니면 read만 가능
4. 주인은 mappedBy 속성 사용 안함
5. 주인이 아니면 mappedBy 속성으로 주인 지정

<br>
그럼 누구를 주인으로 할까 => 외래키가 있는 곳을 주인으로 (비지니스 로직 기준으로 주인을 선택하면 안됨)

# 0908
양방향 연관관계 주의<br>
양방향 매핑시 연관관계의 주인에 값을 입력해야함. 주인이 아닌곳에 입력하면 왜래 키 값이 null로 저장됨 (순수한 객체 관계를 고려하면 항상 양쪽다 값을 입력해야함)<br>
연관관계 편의 메소드는 무한루프 가능성 때문에 하나의 도메인에만 만드는게 좋음
